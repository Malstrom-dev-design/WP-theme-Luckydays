import { __ } from '@wordpress/i18n';
import './editor.scss';
import { useBlockProps, MediaUploadCheck, MediaUpload, RichText } from '@wordpress/block-editor';
import {Button} from '@wordpress/components'
import EditButton from '../../components/Edit-Button';


export default function Edit({attributes, setAttributes}) {
	const {imageUrl, orderTypes} = attributes;
	const blockProps = useBlockProps({ className: 'contact-form editable edit-hover' });

	const handleAddOrderType = (e) =>{
		setAttributes({orderTypes: [... orderTypes, ""]})
	}

	const handleChangeOrderTypeLabel = (index, labelText) => {
		let arrayCopy = [...orderTypes];
		
		if (labelText == "") {
			arrayCopy = arrayCopy.filter((t, i) => i !== index);
		} else {
			arrayCopy[index] = labelText;
		}
		setAttributes({orderTypes: arrayCopy})
	}
	
	return (
		<div { ...blockProps }>

			<h1 class="title">
				<svg width="273" height="58" viewBox="0 0 273 58" fill="none" xmlns="http://www.w3.org/2000/svg">
					<path d="M12.4844 42.3281V51.6094C12.4844 53.2344 11.9062 54.625 10.75 55.7812C9.625 56.9062 8.25 57.4688 6.625 57.4688C5 57.4688 3.60938 56.9062 2.45312 55.7812C1.32812 54.625 0.765625 53.2344 0.765625 51.6094V6.60938C0.765625 4.98437 1.32812 3.60938 2.45312 2.48438C3.60938 1.32812 5 0.75 6.625 0.75C8.25 0.75 9.625 1.32812 10.75 2.48438C11.9062 3.60938 12.4844 4.98437 12.4844 6.60938V29.5312L25.0469 17.0156C26.2031 15.8594 27.5781 15.2812 29.1719 15.2812C30.7969 15.2812 32.1875 15.8594 33.3438 17.0156C34.5 18.1406 35.0781 19.5156 35.0781 21.1406C35.0781 22.7656 34.4844 24.1406 33.2969 25.2656L22.6094 35.9062L34.1875 47.4844C35.375 48.6094 35.9688 49.9844 35.9688 51.6094C35.9688 53.2344 35.3906 54.6094 34.2344 55.7344C33.0781 56.8906 31.6875 57.4688 30.0625 57.4688C28.4688 57.4688 27.1094 56.8906 25.9844 55.7344L12.4844 42.3281ZM60.2969 57.4688C54.4531 57.4688 49.4688 55.4219 45.3438 51.3281C41.25 47.2031 39.2031 42.2188 39.2031 36.375C39.2031 30.5312 41.25 25.5625 45.3438 21.4688C49.4688 17.3438 54.4531 15.2812 60.2969 15.2812C66.1406 15.2812 71.1094 17.3438 75.2031 21.4688C79.3281 25.5625 81.3906 30.5312 81.3906 36.375C81.3906 42.2188 79.3281 47.2031 75.2031 51.3281C71.1094 55.4219 66.1406 57.4688 60.2969 57.4688ZM60.2969 45.75C62.8906 45.75 65.0938 44.8438 66.9062 43.0312C68.75 41.1875 69.6719 38.9688 69.6719 36.375C69.6719 33.7812 68.75 31.5781 66.9062 29.7656C65.0938 27.9219 62.8906 27 60.2969 27C57.7031 27 55.4844 27.9219 53.6406 29.7656C51.8281 31.5781 50.9219 33.7812 50.9219 36.375C50.9219 38.9688 51.8281 41.1875 53.6406 43.0312C55.4844 44.8438 57.7031 45.75 60.2969 45.75ZM97.3281 34.0312V51.6094C97.3281 53.2344 96.75 54.625 95.5938 55.7812C94.4688 56.9062 93.0938 57.4688 91.4688 57.4688C89.8438 57.4688 88.4531 56.9062 87.2969 55.7812C86.1719 54.625 85.6094 53.2344 85.6094 51.6094V21.1406C85.6094 19.5156 86.1719 18.1406 87.2969 17.0156C88.4531 15.8594 89.8438 15.2812 91.4688 15.2812C93.0938 15.2812 94.4844 15.8438 95.6406 16.9688C95.7031 17.0625 95.7656 17.1562 95.8281 17.25C98.3906 15.9375 101.234 15.2812 104.359 15.2812C109.578 15.2812 114 17.1094 117.625 20.7656C121.281 24.3906 123.109 28.8125 123.109 34.0312V51.6094C123.109 53.2344 122.531 54.625 121.375 55.7812C120.25 56.9062 118.875 57.4688 117.25 57.4688C115.625 57.4688 114.234 56.9062 113.078 55.7812C111.953 54.625 111.391 53.2344 111.391 51.6094V34.0312C111.391 32.0625 110.703 30.4062 109.328 29.0625C107.984 27.6875 106.328 27 104.359 27C102.391 27 100.719 27.6875 99.3438 29.0625C98 30.4062 97.3281 32.0625 97.3281 34.0312ZM147.016 27.4688V51.6094C147.016 53.2344 146.438 54.625 145.281 55.7812C144.156 56.9062 142.781 57.4688 141.156 57.4688C139.531 57.4688 138.141 56.9062 136.984 55.7812C135.859 54.625 135.297 53.2344 135.297 51.6094V27.4688H132.719C131.094 27.4688 129.703 26.9062 128.547 25.7812C127.422 24.625 126.859 23.2344 126.859 21.6094C126.859 19.9844 127.422 18.6094 128.547 17.4844C129.703 16.3281 131.094 15.75 132.719 15.75H135.297V7.54688C135.297 5.92187 135.859 4.54688 136.984 3.42188C138.141 2.26562 139.531 1.6875 141.156 1.6875C142.781 1.6875 144.156 2.26562 145.281 3.42188C146.438 4.54688 147.016 5.92187 147.016 7.54688V15.75H149.594C151.219 15.75 152.594 16.3281 153.719 17.4844C154.875 18.6094 155.453 19.9844 155.453 21.6094C155.453 23.2344 154.875 24.625 153.719 25.7812C152.594 26.9062 151.219 27.4688 149.594 27.4688H147.016ZM179.828 45.75C182.422 45.75 184.625 44.8438 186.438 43.0312C188.281 41.1875 189.203 38.9688 189.203 36.375C189.203 33.7812 188.281 31.5781 186.438 29.7656C184.625 27.9219 182.422 27 179.828 27C177.234 27 175.016 27.9219 173.172 29.7656C171.359 31.5781 170.453 33.7812 170.453 36.375C170.453 38.9688 171.359 41.1875 173.172 43.0312C175.016 44.8438 177.234 45.75 179.828 45.75ZM190.141 54.8438C187.078 56.5938 183.641 57.4688 179.828 57.4688C173.984 57.4688 169 55.4219 164.875 51.3281C160.781 47.2031 158.734 42.2188 158.734 36.375C158.734 30.5312 160.781 25.5625 164.875 21.4688C169 17.3438 173.984 15.2812 179.828 15.2812C183.641 15.2812 187.078 16.1562 190.141 17.9062C190.359 17.5938 190.625 17.2812 190.938 16.9688C192.062 15.8438 193.438 15.2812 195.062 15.2812C196.688 15.2812 198.062 15.8594 199.188 17.0156C200.344 18.1406 200.922 19.5156 200.922 21.1406V51.6094C200.922 53.2344 200.344 54.625 199.188 55.7812C198.062 56.9062 196.688 57.4688 195.062 57.4688C193.438 57.4688 192.062 56.8906 190.938 55.7344C190.625 55.4531 190.359 55.1562 190.141 54.8438ZM217.328 42.3281V51.6094C217.328 53.2344 216.75 54.625 215.594 55.7812C214.469 56.9062 213.094 57.4688 211.469 57.4688C209.844 57.4688 208.453 56.9062 207.297 55.7812C206.172 54.625 205.609 53.2344 205.609 51.6094V6.60938C205.609 4.98437 206.172 3.60938 207.297 2.48438C208.453 1.32812 209.844 0.75 211.469 0.75C213.094 0.75 214.469 1.32812 215.594 2.48438C216.75 3.60938 217.328 4.98437 217.328 6.60938V29.5312L229.891 17.0156C231.047 15.8594 232.422 15.2812 234.016 15.2812C235.641 15.2812 237.031 15.8594 238.188 17.0156C239.344 18.1406 239.922 19.5156 239.922 21.1406C239.922 22.7656 239.328 24.1406 238.141 25.2656L227.453 35.9062L239.031 47.4844C240.219 48.6094 240.812 49.9844 240.812 51.6094C240.812 53.2344 240.234 54.6094 239.078 55.7344C237.922 56.8906 236.531 57.4688 234.906 57.4688C233.312 57.4688 231.953 56.8906 230.828 55.7344L217.328 42.3281ZM263.734 27.4688V51.6094C263.734 53.2344 263.156 54.625 262 55.7812C260.875 56.9062 259.5 57.4688 257.875 57.4688C256.25 57.4688 254.859 56.9062 253.703 55.7812C252.578 54.625 252.016 53.2344 252.016 51.6094V27.4688H249.438C247.812 27.4688 246.422 26.9062 245.266 25.7812C244.141 24.625 243.578 23.2344 243.578 21.6094C243.578 19.9844 244.141 18.6094 245.266 17.4844C246.422 16.3281 247.812 15.75 249.438 15.75H252.016V7.54688C252.016 5.92187 252.578 4.54688 253.703 3.42188C254.859 2.26562 256.25 1.6875 257.875 1.6875C259.5 1.6875 260.875 2.26562 262 3.42188C263.156 4.54688 263.734 5.92187 263.734 7.54688V15.75H266.312C267.938 15.75 269.312 16.3281 270.438 17.4844C271.594 18.6094 272.172 19.9844 272.172 21.6094C272.172 23.2344 271.594 24.625 270.438 25.7812C269.312 26.9062 267.938 27.4688 266.312 27.4688H263.734Z" fill="#1D1E23"/>
				</svg>
			</h1>

			<div className='wrapper'>
				<div className='left-side'>

					<div class="image-wrapper">
						<div className='actions'>
							<MediaUploadCheck>
								<MediaUpload
									onSelect={(media) => setAttributes({imageUrl: media.url})}
									allowedTypes={['image']}
									render={({ open }) => (
										<Button onClick={open} className='primary'> {"Replace Image"}</Button>
									)}
								/>
							</MediaUploadCheck>
						</div>

						<img src={imageUrl ? imageUrl : "/assets/media/images/print.png"} alt=""></img>
						<div class="contact-welcome-text">
							<p class="text-line-1"></p>
							<p class="text-line-2"></p>
						</div>
					</div>

					<div class="select-order-wrapper">
						{orderTypes && orderTypes.map((type, i) => (
							<div for="order" class="order-type-wrapper">
								<div class="custom-radio-button" >
									<input autocomplete="off" type="radio" name="order" value={type}></input>
									<span class="line-1 line"></span>
									<span class="line-2 line"></span>
								</div>
								<RichText
									tagName='h4'
									className='label'
									onChange={(value)=>{handleChangeOrderTypeLabel(i, value)}}
									value={type}
									placeholder="ex: tryck"
								/>
							</div>
						))}

						<div className='actions'>
							<button onClick={handleAddOrderType} className='primary add-order-type-btn'>add order</button>
						</div>
					</div>

				</div>


                <div className='form'>
					<div className="input-wrapper">
						<label for="name" className="required">namn</label>
						<div className='input-ph'>ex: förnamn & efternamn...</div>
					</div>

					<div className="input-wrapper">
						<label for="email" className="required">epost</label>
						<div className='input-ph'>ex: epost@mail.se...</div>
					</div>

					<div className="input-wrapper">
						<label for="message" className="required">beskriv ditt ärende</label>
						<div className='textarea-ph'>ex: 20 t-shirts för bandmerch med logga</div>
					</div>

                    <div className="submit-button">Skicka!</div>
                </div>
			</div>
		</div>
	);
}