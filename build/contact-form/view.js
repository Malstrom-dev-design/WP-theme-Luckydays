(()=>{"use strict";document.addEventListener("DOMContentLoaded",()=>{let e=!1;const t=document.querySelector(".contact-form.rendered"),r=t.querySelector(".loader"),c=r.querySelector(".message"),o=t.querySelector("form"),a=o.querySelectorAll("input,textareaa"),s=o.querySelectorAll("input,textarea");if(!t)return;const n=()=>{e=!1,c.textContent="",t.classList.remove("loading"),r.classList.remove("check"),r.classList.remove("error")},l=t.querySelectorAll(".order-type-wrapper");l.forEach(e=>{e.addEventListener("click",()=>{l.forEach(e=>{e.querySelector(".custom-radio-button").classList.remove("checked")});const t=e.querySelector("input"),r=e.querySelector(".custom-radio-button");t.checked=!0,r.classList.add("checked")})}),o.querySelector(".submit-button").addEventListener("click",async l=>{if(l.preventDefault(),e)return;if(e=!0,i.removeEventListener("click",n),(()=>{let e=!1;return o.querySelectorAll("input.input-error,textarea.input-error").forEach(e=>{e.classList.remove("input-error")}),s.forEach(t=>{""===t.value&&(t.offsetHeight,t.classList.add("input-error"),e=!0)}),!!e})())return void(e=!1);t.classList.add("loading");const d={};a.forEach(e=>{const t=e.name,r=e.value;d[t]=r});let u="";t.querySelectorAll(".order-type-wrapper input").forEach(e=>{e.checked&&(u=e.value)}),d.subject=`${u} förfrågan`,d.target="malstrom";const p=new Request("https://malstrom.art/API/mail/api.php",{method:"POST",body:JSON.stringify(d),headers:{"Content-Type":"application/json"}});try{let e;const t=await fetch(p),o=await t.json();console.log(t,o),e||(c.textContent="misslyckades att skicka!",r.classList.add("error"),i.addEventListener("click",n)),e&&(c.textContent="meddelandet har skickats!",r.classList.add("check"),i.addEventListener("click",n))}catch(e){c.textContent="Något gick fel! Vänligen prova igen",r.classList.add("error"),i.addEventListener("click",n)}});const i=r.querySelector(".close-btn")})})();